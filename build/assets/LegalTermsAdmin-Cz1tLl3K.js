import{cE as k,j as e,ao as l,aE as x,aG as C,cF as F,cG as L,cH as S}from"./index-Cjn3py5b.js";import{r as o}from"./vendor-BagLKi1z.js";import{F as n,e as E,I as d}from"./index-2ZNh93OQ.js";import{s as a}from"./index-lI4ucwGs.js";import{C as A}from"./index-7W5owr5O.js";import{F as M,P as R}from"./Table-DOoVuXeP.js";import{M as D,R as H}from"./DeleteOutlined-DhB81-EL.js";import"./icons-X9-Iq-vF.js";import"./notifications-DStr16IZ.js";import"./index-B-P4hzy5.js";const Q=()=>{const[p,f]=o.useState([]),[g,u]=o.useState(!1),[j,r]=o.useState(!1),[c,i]=o.useState(null),[m]=n.useForm();o.useEffect(()=>{h()},[]);const h=async()=>{try{u(!0);const t=await k();f(t)}catch(t){console.error(t),a.error("Không thể tải dữ liệu")}finally{u(!1)}},y=()=>{i(null),m.resetFields(),r(!0)},T=t=>{i(t),m.setFieldsValue(t),r(!0)},I=async t=>{try{await S(t),a.success("Xóa thành công"),await h()}catch(s){console.error(s),a.error("Xóa thất bại")}},w=async t=>{try{c&&c.id?(await F(c.id,t),a.success("Cập nhật thành công")):(await L(t),a.success("Thêm mới thành công")),r(!1),i(null),await h()}catch(s){console.error(s),a.error("Lưu thất bại")}},b=[{title:"Thuật ngữ",dataIndex:"term",key:"term"},{title:"Định nghĩa",dataIndex:"definition",key:"definition",render:t=>t?t.slice(0,100)+(t.length>100?"...":""):""},{title:"Danh mục",dataIndex:"category",key:"category"},{title:"Ví dụ",dataIndex:"example",key:"example"},{title:"Hành động",key:"actions",render:(t,s)=>e.jsxs(x,{children:[e.jsx(l,{icon:e.jsx(C,{}),onClick:()=>T(s)}),e.jsx(R,{title:"Bạn có chắc muốn xóa?",onConfirm:()=>I(s.id),okText:"Xóa",cancelText:"Hủy",children:e.jsx(l,{danger:!0,icon:e.jsx(H,{})})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h2",{children:"Quản lý Thuật ngữ pháp luật"}),e.jsx(l,{type:"primary",icon:e.jsx(E,{}),onClick:y,children:"Thêm mới"})]}),e.jsx(A,{children:e.jsx(M,{dataSource:p,columns:b,rowKey:"id",loading:g})}),e.jsx(D,{title:c?"Sửa thuật ngữ":"Thêm thuật ngữ",open:j,onCancel:()=>{r(!1),i(null)},footer:null,children:e.jsxs(n,{form:m,layout:"vertical",onFinish:w,initialValues:{},children:[e.jsx(n.Item,{name:"term",label:"Thuật ngữ",rules:[{required:!0}],children:e.jsx(d,{})}),e.jsx(n.Item,{name:"definition",label:"Định nghĩa",rules:[{required:!0}],children:e.jsx(d.TextArea,{rows:4})}),e.jsx(n.Item,{name:"category",label:"Danh mục",children:e.jsx(d,{})}),e.jsx(n.Item,{name:"example",label:"Ví dụ",children:e.jsx(d.TextArea,{rows:2})}),e.jsx(n.Item,{style:{marginTop:16},children:e.jsxs(x,{children:[e.jsx(l,{htmlType:"submit",type:"primary",children:"Lưu"}),e.jsx(l,{onClick:()=>{r(!1),i(null)},children:"Hủy"})]})})]})})]})};export{Q as default};
