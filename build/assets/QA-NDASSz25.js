import{j as e,L as A,Z as y,P as Q,N as V,T as h}from"./index-Cjn3py5b.js";import{r as i}from"./vendor-BagLKi1z.js";import{y as r}from"./notifications-DStr16IZ.js";import"./icons-X9-Iq-vF.js";const K=()=>{const[o,C]=i.useState("all"),[d,u]=i.useState(!1),[m,w]=i.useState(""),[c,q]=i.useState(null),[n,x]=i.useState({name:"",email:"",phone:"",category:"",question:"",agreedTerms:!1}),[f,p]=i.useState(!1),[g,S]=i.useState([]),[F,j]=i.useState(!0),[v,k]=i.useState(null);if(i.useEffect(()=>{(async()=>{try{j(!0);const a=await h.getAllFAQs();S(a),a.forEach(t=>{t.isImportant&&h.incrementViews(t.id)})}catch(a){console.error("Error loading FAQs:",a),k("Kh√¥ng th·ªÉ t·∫£i c√¢u h·ªèi. Vui l√≤ng th·ª≠ l·∫°i sau."),r.error("L·ªói khi t·∫£i d·ªØ li·ªáu")}finally{j(!1)}})()},[]),F)return e.jsx(A,{});if(v)return e.jsx("section",{className:"qa-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"H·ªèi & ƒê√°p"}),e.jsx("p",{style:{color:"red"},children:v})]})});const N=["all",...new Set(g.map(s=>s.category))],b=g.filter(s=>{const a=o==="all"||s.category===o,t=s.question.toLowerCase().includes(m.toLowerCase())||s.answer.toLowerCase().includes(m.toLowerCase());return a&&t}),l=s=>{const{name:a,value:t,type:E}=s.target;x({...n,[a]:E==="checkbox"?s.target.checked:t})},T=s=>{if(s.preventDefault(),!n.agreedTerms){r.error("Vui l√≤ng ƒë·ªìng √Ω v·ªõi ch√≠nh s√°ch b·∫£o m·∫≠t");return}if(!n.name||!n.email||!n.phone||!n.question){r.error("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc");return}r.success("C√¢u h·ªèi c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!"),p(!0),setTimeout(()=>{u(!1),p(!1),x({name:"",email:"",phone:"",category:"",question:"",agreedTerms:!1})},2e3)},L=s=>{q(c===s?null:s),c!==s&&h.incrementViews(s)};return e.jsx("section",{id:"qa",className:"qa-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"section-title",children:"H·ªèi ƒê√°p"}),e.jsx("p",{className:"section-subtitle",children:"C√°c c√¢u h·ªèi th∆∞·ªùng g·∫∑p v√† t∆∞ v·∫•n ph√°p l√Ω chi ti·∫øt t·ª´ c√°c chuy√™n gia"}),e.jsx("div",{className:"qa-search-container",children:e.jsx("input",{type:"text",className:"qa-search",placeholder:"T√¨m ki·∫øm c√¢u h·ªèi, t·ª´ kh√≥a...",value:m,onChange:s=>w(s.target.value)})}),e.jsx("div",{className:"qa-filters",children:N.map(s=>e.jsx("button",{className:`filter-btn ${o===s?"active":""}`,onClick:()=>C(s),children:s==="all"?"T·∫•t c·∫£":s},s))}),e.jsx("div",{className:"qa-list",children:b.length>0?b.map(s=>e.jsxs("div",{className:`qa-item ${c===s.id?"expanded":""}`,children:[e.jsx("div",{className:"qa-question",onClick:()=>L(s.id),children:e.jsxs("div",{className:"qa-header",children:[s.isImportant&&e.jsxs("span",{className:"qa-important",children:[e.jsx(y,{})," Quan tr·ªçng"]}),e.jsx("span",{className:"qa-question-text",children:s.question})]})}),c===s.id&&e.jsxs("div",{className:"qa-answer",children:[e.jsxs("div",{className:"qa-answer-content",children:[e.jsx("p",{className:"qa-answer-short",children:s.answer}),s.detailedExplanation&&e.jsxs("div",{className:"qa-detailed",children:[e.jsx("h5",{children:"Gi·∫£i th√≠ch chi ti·∫øt"}),e.jsx("div",{style:{whiteSpace:"pre-wrap",lineHeight:1.6},children:s.detailedExplanation})]}),s.examples&&s.examples.length>0&&e.jsxs("div",{className:"qa-examples",children:[e.jsxs("h5",{children:[e.jsx(y,{})," V√≠ d·ª• th·ª±c t·∫ø"]}),e.jsx("ul",{children:s.examples.map((a,t)=>e.jsx("li",{children:a},t))})]}),s.relatedLaws&&s.relatedLaws.length>0&&e.jsxs("div",{className:"qa-laws",children:[e.jsxs("h5",{children:[e.jsx(Q,{})," VƒÉn b·∫£n ph√°p lu·∫≠t li√™n quan"]}),e.jsx("ul",{children:s.relatedLaws.map((a,t)=>e.jsx("li",{children:a},t))})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"qa-tags",children:s.tags.map(a=>e.jsxs("span",{className:"qa-tag",children:[e.jsx(V,{})," ",a]},a))})]}),e.jsxs("div",{className:"qa-footer",children:[e.jsxs("button",{className:"qa-helpful",onClick:a=>{a.stopPropagation(),h.incrementHelpful(s.id),r.success("C·∫£m ∆°n ph·∫£n h·ªìi c·ªßa b·∫°n!")},children:["üëç H·ªØu √≠ch (",s.helpfulCount||0,")"]}),e.jsxs("span",{className:"qa-views",children:["üëÅ ",s.views||0," l∆∞·ª£t xem"]})]})]})]},s.id)):e.jsx("div",{className:"qa-empty",children:e.jsx("p",{children:"Kh√¥ng t√¨m th·∫•y c√¢u h·ªèi n√†o. Vui l√≤ng th·ª≠ t√¨m ki·∫øm kh√°c."})})}),e.jsxs("div",{className:"qa-submit-section",style:{display:"none"},children:[e.jsx("h3",{children:"Kh√¥ng t√¨m th·∫•y c√¢u tr·∫£ l·ªùi?"}),e.jsx("p",{children:"G·ª≠i c√¢u h·ªèi c·ªßa b·∫°n cho lu·∫≠t s∆∞ t∆∞ v·∫•n. Ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi trong 24 gi·ªù."}),e.jsx("button",{className:"btn btn-primary btn-lg",onClick:()=>u(!d),children:d?"·∫®n form":"G·ª≠i c√¢u h·ªèi"}),d&&e.jsx("form",{className:"qa-form",onSubmit:T,children:f?e.jsxs("div",{className:"qa-success",children:[e.jsx("h4",{children:"‚úì G·ª≠i c√¢u h·ªèi th√†nh c√¥ng!"}),e.jsx("p",{children:"Ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi l·∫°i trong 24 gi·ªù."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"H·ªç v√† t√™n *"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:l,placeholder:"Nh·∫≠p h·ªç v√† t√™n",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:l,placeholder:"Nh·∫≠p email",required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"S·ªë ƒëi·ªán tho·∫°i *"}),e.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:l,placeholder:"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Lƒ©nh v·ª±c *"}),e.jsxs("select",{name:"category",value:n.category,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"-- Ch·ªçn lƒ©nh v·ª±c --"}),N.filter(s=>s!=="all").map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"form-group full",children:[e.jsx("label",{children:"C√¢u h·ªèi c·ªßa b·∫°n *"}),e.jsx("textarea",{name:"question",value:n.question,onChange:l,placeholder:"Nh·∫≠p c√¢u h·ªèi chi ti·∫øt...",rows:5,required:!0})]}),e.jsxs("div",{className:"form-group-checkbox",children:[e.jsx("input",{type:"checkbox",id:"agreedTermsQA",name:"agreedTerms",checked:n.agreedTerms,onChange:l}),e.jsx("label",{htmlFor:"agreedTermsQA",children:"T√¥i ƒë·ªìng √Ω v·ªõi ch√≠nh s√°ch b·∫£o m·∫≠t"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",children:"G·ª≠i c√¢u h·ªèi"})]})})]})]})})};export{K as default};
